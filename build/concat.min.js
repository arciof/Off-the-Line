'use strict';var f="function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,d){a!=Array.prototype&&a!=Object.prototype&&(a[b]=d.value)},g="undefined"!=typeof window&&window===this?this:"undefined"!=typeof global&&null!=global?global:this;function h(a,b){if(b){var d=g;a=a.split(".");for(var c=0;c<a.length-1;c++){var e=a[c];e in d||(d[e]={});d=d[e]}a=a[a.length-1];c=d[a];b=b(c);b!=c&&null!=b&&f(d,a,{configurable:!0,writable:!0,value:b})}}
h("String.prototype.endsWith",function(a){return a?a:function(a,d){if(null==this)throw new TypeError("The 'this' value for String.prototype.endsWith must not be null or undefined");if(a instanceof RegExp)throw new TypeError("First argument to String.prototype.endsWith must not be a regular expression");var b=this+"";a+="";void 0===d&&(d=b.length);d=Math.max(0,Math.min(d|0,b.length));for(var e=a.length;0<e&&0<d;)if(b[--d]!=a[--e])return!1;return 0>=e}});
function k(){k=function(){};g.Symbol||(g.Symbol=l)}var l=function(){var a=0;return function(b){return"jscomp_symbol_"+(b||"")+a++}}();function m(){k();var a=g.Symbol.iterator;a||(a=g.Symbol.iterator=g.Symbol("iterator"));"function"!=typeof Array.prototype[a]&&f(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return n(this)}});m=function(){}}function n(a){var b=0;return p(function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}})}
function p(a){m();a={next:a};a[g.Symbol.iterator]=function(){return this};return a}function q(a,b){m();a instanceof String&&(a+="");var d=0,c={next:function(){if(d<a.length){var e=d++;return{value:b(e,a[e]),done:!1}}c.next=function(){return{done:!0,value:void 0}};return c.next()}};c[Symbol.iterator]=function(){return c};return c}h("Array.prototype.keys",function(a){return a?a:function(){return q(this,function(a){return a})}});
h("Object.values",function(a){return a?a:function(a){var b=[],c;for(c in a)Object.prototype.hasOwnProperty.call(a,c)&&b.push(a[c]);return b}});
function r(){this.canvas=document.createElement("canvas");this.canvas.setAttribute("width",320);this.canvas.setAttribute("height",240);this.canvas.style.width="640px";this.canvas.style.height="480px";this.canvas.style.backgroundColor="black";document.getElementById("game").appendChild(this.canvas);this.M=this.canvas.getContext("2d");this.width=320;this.height=240;this.scale=2;this.entities=[];this.F=this.G=!1;t(this);new (window.AudioContext||window.webkitAudioContext);u(this);this.H(performance.now())}
function u(a){a.A={};[].forEach(function(b){a.A[b]={};a.A[b].loaded=!1;b.endsWith(".png")||b.endsWith(".jpg")?(a.A[b].data=new Image,a.A[b].data.onload=function(){return a.A[b].loaded=!0},a.A[b].data.src=b):b.endsWith(".wav")||b.endsWith(".mp3")?(a.A[b].data=new Audio,a.A[b].data.src=b,a.A[b].data.load(),a.A[b].loaded=!0):console.assert(!1,"Unable to load "+b+" - unknown type")})}function v(a){return 0<Object.keys(a.A).length&&0==Object.values(a.A).every(function(a){return a.loaded})}
r.prototype.H=function(a){window.requestAnimationFrame(this.H.bind(this));if(!v(this)){var b=Math.min((a-(this.N||a))/1E3,.2);this.N=a;this.M.clearRect(0,0,this.width,this.height);void 0!==this.state&&this.state(b);w(this);x(this,b);y(this);z(this)}};function x(a,b){a.entities.forEach(function(a){void 0!==a.update&&a.update(b)});a.F&&(a.entities=a.entities.filter(function(a){return!0!==a.R}),a.F=!1)}function y(a){a.entities.forEach(function(a){void 0!==a.P&&a.P()})}
function w(a){a.G&&(a.entities.sort(function(a,d){return a.z-d.z}),a.G=!1)}
function t(a){a.O={x:0,y:0};a.B={x:0,y:0};a.I=!1;a.K=!1;a.J=!1;a.L=!1;window.addEventListener("mousemove",function(b){a.B.x+=b.S;a.B.y+=b.T;a.O={x:b.clientX,y:b.clientY}});window.addEventListener("mousedown",function(b){0===b.button?(a.I=!0,a.J=!0):2===b.button&&(a.K=!0,a.L=!0)});window.addEventListener("mouseup",function(b){0===b.button?a.I=!1:2===b.button&&(a.K=!1)});a.C={a:"a",b:"b",c:"c",d:"d",e:"e",f:"f",g:"g",h:"h",i:"i",j:"j",k:"k",l:"l",m:"m",n:"n",o:"o",p:"p",q:"q",r:"r",s:"s",t:"t",u:"u",
v:"v",w:"w",x:"x",y:"y",z:"z",0:"zero",1:"one",2:"two",3:"three",4:"four",5:"five",6:"six",7:"seven",8:"eight",9:"nine",arrowup:"up",arrowdown:"down",arrowleft:"left",arrowright:"right"," ":"space",escape:"escape",control:"ctrl",shift:"shift",alt:"alt",tab:"tab",enter:"enter",backspace:"backspace"};a.keys={};a.D={};Object.keys(a.C).forEach(function(b){return a.keys[b]=!1});window.addEventListener("keydown",function(b){A(a,b,!0)});window.addEventListener("keyup",function(b){A(a,b,!1)})}
function A(a,b,d){var c=b.key.toLowerCase();void 0!==a.C[c]&&(c=a.C[c],a.D[c]=!1===a.keys[c]||void 0===a.keys[c],a.keys[c]=d,"up"!==c&&"down"!==c&&"left"!==c&&"right"!==c||b.preventDefault())}function z(a){a.B.x=0;a.B.y=0;a.J=!1;a.L=!1;Object.keys(a.D).forEach(function(b){a.D[b]=!1})}var B=new r;B.state=C;function C(){B.state=D;console.log("Started!")}function D(){};